<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Portfolio — Terminal</title>
  <style>
    :root {
      --bg: #0b0f14;
      --panel: #0e141b;
      --text: #d8e1e8;
      --muted: #8696a8;
      --accent: #4cff88;
      --accent-dim: #34c76a;
      --cursor: #4cff88;
      --shadow: rgba(0,0,0,.35);
    }
    /* Thèmes alternatifs */
    .theme-matrix {
      --bg: #000;
      --panel: #020402;
      --text: #b0ffb0;
      --muted: #7aff7a;
      --accent: #00ff66;
      --accent-dim: #00cc52;
      --cursor: #00ff66;
    }
    .theme-azure {
      --bg: #0a0f16;
      --panel: #0f1724;
      --text: #e2eaf5;
      --muted: #9db5d1;
      --accent: #4da3ff;
      --accent-dim: #3388e6;
      --cursor: #4da3ff;
    }
    .theme-dark {
      --bg: #0b0f14;
      --panel: #0e141b;
      --text: #d8e1e8;
      --muted: #8696a8;
      --accent: #4cff88;
      --accent-dim: #34c76a;
      --cursor: #4cff88;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 800px at 10% -10%, rgba(76,255,136,.08), transparent 70%),
                  radial-gradient(1000px 700px at 90% 110%, rgba(77,163,255,.08), transparent 70%),
                  var(--bg);
      color: var(--text);
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace;
      line-height: 1.6;
    }

    .wrap {
      max-width: 980px;
      margin: 40px auto;
      padding: 0 16px;
    }

    .terminal {
      background: linear-gradient(180deg, rgba(255,255,255,.02), transparent 160px), var(--panel);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: 10px;
      box-shadow: 0 12px 30px var(--shadow), inset 0 1px 0 rgba(255,255,255,.03);
      overflow: hidden;
    }

    .term-topbar {
      display: flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border-bottom: 1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.25);
      position: sticky; top: 0;
    }

    .dot { width: 12px; height: 12px; border-radius: 50%; display: inline-block; }
    .dot.red { background: #ff5f57; }
    .dot.yellow { background: #febc2e; }
    .dot.green { background: #28c840; }

    .term-title {
      margin-left: auto;
      font-size: .92rem;
      color: var(--muted);
    }

    .screen {
      height: 70vh;
      min-height: 420px;
      padding: 18px;
      overflow-y: auto;
      scrollbar-width: thin;
    }
    .screen::-webkit-scrollbar { height: 8px; width: 10px; }
    .screen::-webkit-scrollbar-thumb { background: rgba(255,255,255,.08); border-radius: 4px; }

    .line { white-space: pre-wrap; word-break: break-word; }
    .line.dim { color: var(--muted); }
    .prompt-line {
      display: flex; gap: 10px; align-items: baseline; flex-wrap: wrap;
    }
    .prompt {
      color: var(--accent);
    }

    /* Input */
    .input-row {
      display: flex; gap: 10px; align-items: center;
      padding: 12px 18px 16px; border-top: 1px solid rgba(255,255,255,.06);
      background: rgba(0,0,0,.15);
    }
    .path { color: var(--muted); }
    #cli-input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      color: var(--text);
      font: inherit;
      padding: 6px 2px;
    }
    .cursor {
      display: inline-block;
      width: 8px; height: 1.2em;
      background: var(--cursor);
      margin-left: 2px;
      animation: blink 1s step-end infinite;
      vertical-align: text-bottom;
    }
    @keyframes blink { 50% { opacity: 0; } }

    .tag { color: var(--accent); }
    .strong { color: var(--text); font-weight: 600; }
    .link {
      color: var(--accent);
      text-decoration: none;
      border-bottom: 1px dashed var(--accent-dim);
    }
    .link:hover { opacity: .9; }

    .kbd {
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      padding: 2px 6px;
      border-radius: 4px;
      font-size: .85em;
      color: var(--muted);
    }

    @media (max-width: 640px) {
      .screen { height: 65vh; }
      .term-title { display: none; }
    }
  </style>
</head>
<body class="theme-dark">
  <div class="wrap">
    <div class="terminal" role="application" aria-label="Terminal portfolio">
      <div class="term-topbar" aria-hidden="true">
        <span class="dot red"></span>
        <span class="dot yellow"></span>
        <span class="dot green"></span>
        <div class="term-title">larry@portfolio — bash</div>
      </div>

      <div id="screen" class="screen" tabindex="0" aria-live="polite" aria-atomic="false"></div>

      <div class="input-row">
        <span class="prompt">larry@portfolio:<span class="path">~</span>$</span>
        <input id="cli-input" type="text" aria-label="Terminal input" autocomplete="off" spellcheck="false" autofocus />
        <span class="cursor" aria-hidden="true"></span>
      </div>
    </div>
    <p style="margin:12px 6px;color:var(--muted);font-size:.9rem">
      Astuce : tape <span class="kbd">/aide</span> • Autocomplétion : <span class="kbd">Tab</span> • Historique : <span class="kbd">↑</span>/<span class="kbd">↓</span>
    </p>
  </div>

  <script>
    /***********************
     *  Portfolio Terminal *
     ***********************/
    (function () {
      const screen = document.getElementById('screen');
      const input = document.getElementById('cli-input');
      const body = document.body;

      // ---- Config ----
      const USER = "Lixzy"; // ← Personnalise ici ton nom
      const PROMPT = 'Lixzy:~$';
      const TYPING_SPEED = 0; // ms par caractère (mets 0 pour instantané)
      const SAVE_THEME_KEY = 'terminal_theme';

      // ---- Données ----
      const projects = [
        {
          id: 1,
          title: "Menu admin — FiveM",
          stack: ["Lua", "FiveM", "DB", "Webhooks"],
          desc: "Menu complet : RageUi, Ban, Jail, tenue modée, système de grade, report, Menu ped, logs webhook. Compatible toutes bases.",
          url: null
        },
        {
          id: 2,
          title: "Site",
          stack: ["HTML", "CSS", "tsx", "ts", "sql"],
          desc: "Design dark mode, animations, api.",
          url: null
        },
        {
          id: 3,
          title: "Aimlab",
          stack: ["HTML", "CSS", "JS", "lua", "Sql"],
          desc: "menu de choix d'entrainement + timer + Leaderboard.",
          url: null
        },
          id: 4,
          title: "Chat",
          stack: ["HTML", "CSS", "JS", "lua"],
          desc: " Interface Moderne (NUI)+ Notification.",
          url: null
        },
      ];

      const socials = {
        github: "https://github.com/Lixzyy", // ← Mets ton GitHub
        email: null,       // ← Mets ton email
        discord: "lixzy_el"
      };

      // ---- Utils ----
      const sleep = (ms) => new Promise(res => setTimeout(res, ms));
      const escapeHtml = (str) => str.replace(/[&<>"']/g, c => ({
        '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'
      }[c]));

      function printLine(html, cls) {
        const line = document.createElement('div');
        line.className = 'line' + (cls ? ' ' + cls : '');
        line.innerHTML = html;
        screen.appendChild(line);
        screen.scrollTop = screen.scrollHeight;
      }

      async function typeOut(text, cls) {
        if (TYPING_SPEED <= 0) {
          printLine(escapeHtml(text), cls);
          return;
        }
        const line = document.createElement('div');
        line.className = 'line' + (cls ? ' ' + cls : '');
        screen.appendChild(line);
        for (let ch of text) {
          line.textContent += ch;
          screen.scrollTop = screen.scrollHeight;
          await sleep(TYPING_SPEED);
        }
      }

      function printPrompt(cmd) {
        printLine(`<span class="prompt">${escapeHtml(PROMPT)}</span> ${escapeHtml(cmd)}`);
      }

      function clearScreen() {
        screen.innerHTML = '';
      }

      // ---- Commandes ----
      const COMMANDS = {
        '/aide': help,
        '/help': help,
        '/?': help,

        '/apropos': about,
        '/about': about,

        '/competences': skills,
        '/skills': skills,

        '/projets': listProjects,
        '/projet': listProjects,
        '/projects': listProjects,
        '/project': listProjects,

        '/voir': showProject,  // /voir 2
        '/open': openLink,     // /open github
        '/email': openEmail,   // ouvre mailto

        '/contact': contact,

        '/theme': theme,       // /theme matrix|dark|azure
        '/clair': () => setTheme('azure'),
        '/sombre': () => setTheme('dark'),

        '/clear': () => { clearScreen(); banner(); },
        '/cls': () => { clearScreen(); banner(); },

        '/banner': banner,
        '/ls': help
      };

      const COMMAND_LIST = Object.keys(COMMANDS).sort();

      // ---- Implémentations ----
    function bannner() {
      const art = [
        " _     _                  ",
        "| |   (_)_  __ _____   _  ",
        "| |   | \ \/ /|_  / | | | ",
        "| |___| |>  <  / /| |_| | ",
        "|_____|_/_/\_\/___|\__, | ",
        "                    |___/ ",
      
          `        Portfolio — ${USER}`,
        ];
        art.forEach(l => printLine(`<span class="tag">${escapeHtml(l)}</span>`));
        printLine(`Tape <span class="strong">/aide</span> pour la liste des commandes.`);
        printLine(`Astuce : <span class="kbd">Tab</span> (auto‑complétion), <span class="kbd">↑/↓</span> (historique)`, 'dim');
      }

      function help() {
        const items = [
          ["Navigation", "/apropos, /competences, /projets, /contact"],
          ["Projets", "/voir <id> — détails d’un projet"],
          ["Outils", "/open <github|site|id>, /email, /clear"],
          ["Thèmes", "/theme matrix | dark | azure  (alias : /clair, /sombre)"],
          ["Aide", "/aide  (alias : /help, /?)"]
        ];
        printLine("Commandes disponibles :");
        items.forEach(([title, cmds]) => {
          printLine(`• <span class="strong">${escapeHtml(title)}</span> : ${escapeHtml(cmds)}`);
        });
      }

      function about() {
        printLine(`<span class="strong">À propos</span>`);
        typeOut(`Je suis ${USER}, développeur passionné par les systèmes interactifs, les scripts FiveM et les interfaces web modernes. J’aime créer des projets propres, optimisés et maintenables.`);
      }

      function skills() {
        printLine(`<span class="strong">Compétences</span>`);
        printLine(`• Web : HTML, CSS, JavaScript, tsx, ts, Sql`);
        printLine(`• Backend : Node.js/Express, SQL/MariaDB`);
        printLine(`• FiveM : Lua, optimisation, intégrations (DB, Webhooks)`);
        printLine(`• Outils : Git, UI/UX, performance`);
      }

      function listProjects() {
        printLine(`<span class="strong">Projets</span> (utilise <span class="tag">/voir &lt;id&gt;</span> pour les détails)`);
        projects.forEach(p => {
          printLine(`#${p.id} — ${escapeHtml(p.title)}  [${p.stack.join(', ')}]`);
        });
      }

      function showProject(args = []) {
        const id = parseInt(args[0], 10);
        if (isNaN(id)) {
          printLine(`Utilisation : <span class="tag">/voir &lt;id&gt;</span> — ex: /voir 1`, 'dim');
          return;
        }
        const p = projects.find(pr => pr.id === id);
        if (!p) { printLine(`Projet #${id} introuvable.`); return; }
        printLine(`<span class="strong">${escapeHtml(p.title)}</span>`);
        printLine(`<span class="dim">${p.stack.join(' • ')}</span>`);
        printLine(`${escapeHtml(p.desc)}`);
        if (p.url) printLine(`Lien : <a class="link" href="${p.url}" target="_blank" rel="noopener">ouvrir</a>`);
      }

      function openLink(args = []) {
        const key = (args[0] || '').toLowerCase();
        if (!key) {
          printLine(`Utilisation : <span class="tag">/open github|site|&lt;id&gt;</span>`, 'dim');
          return;
        }
        if (key === 'github' && socials.github) {
          window.open(socials.github, '_blank', 'noopener'); printLine(`Ouverture de GitHub…`);
          return;
        }
        if (/^\\d+$/.test(key)) {
          const p = projects.find(pr => pr.id === Number(key));
          if (p?.url) { window.open(p.url, '_blank', 'noopener'); printLine(`Ouverture du projet #${p.id}…`); }
          else { printLine(`Ce projet n’a pas de lien défini.`); }
          return;
        }
        printLine(`Lien inconnu ou non configuré.`);
      }

      function openEmail() {
        if (socials.email) { window.location.href = socials.email; printLine(`Ouverture du client mail…`); }
        else { printLine(`Aucun email configuré.`); }
      }

      function contact() {
        printLine(`<span class="strong">Contact</span>`);
        if (socials.email) printLine(`Email : <a class="link" href="${socials.email}">${socials.email.replace('mailto:','')}</a>`);
        if (socials.github) printLine(`GitHub : <a class="link" href="${socials.github}" target="_blank" rel="noopener">${socials.github}</a>`);
        if (!socials.email && !socials.github) printLine(`Aucun contact configuré.`);
      }

      function setTheme(name) {
        body.classList.remove('theme-matrix', 'theme-azure', 'theme-dark');
        switch ((name || '').toLowerCase()) {
          case 'matrix': body.classList.add('theme-matrix'); break;
          case 'azure': body.classList.add('theme-azure'); break;
          case 'dark':
          default: body.classList.add('theme-dark'); break;
        }
        try { localStorage.setItem(SAVE_THEME_KEY, body.className); } catch {}
        printLine(`Thème actif : <span class="tag">${escapeHtml(name || 'dark')}</span>`);
      }

      function theme(args = []) {
        const name = (args[0] || '').toLowerCase();
        if (!name) {
          printLine(`Utilisation : <span class="tag">/theme matrix | dark | azure</span>`, 'dim');
          return;
        }
        setTheme(name);
      }

      // ---- Historique & complétion ----
      const history = [];
      let histIndex = -1;

      function autocomplete(current) {
        const opts = COMMAND_LIST.filter(c => c.startsWith(current));
        if (opts.length === 1) return opts[0];
        if (opts.length > 1) {
          printLine(opts.join('  '), 'dim');
        }
        return current;
      }

      // ---- Parser & routeur ----
      function parse(inputStr) {
        const raw = inputStr.trim();
        if (!raw) return null;
        const parts = raw.split(/\s+/);
        const cmd = parts[0].toLowerCase();
        const args = parts.slice(1);
        return { raw, cmd, args };
      }

      async function run(rawCmd) {
        printPrompt(rawCmd);
        const parsed = parse(rawCmd);
        if (!parsed) return;
        const { cmd, args } = parsed;

        // Alias FR ↔ EN commandes principales
        const aliasMap = {
          '/projet': '/projets', '/project': '/projets', '/projects': '/projets',
          '/about': '/apropos', '/skills': '/competences',
          '/help': '/aide', '/?': '/aide',
          '/cls': '/clear'
        };
        const normalized = aliasMap[cmd] || cmd;

        const fn = COMMANDS[normalized];
        if (typeof fn === 'function') {
          try { await fn(args); }
          catch (e) { printLine(`Erreur : ${escapeHtml(e.message || String(e))}`); }
        } else {
          printLine(`Commande inconnue : <span class="tag">${escapeHtml(cmd)}</span> — tape <span class="strong">/aide</span>`);
        }
      }

      // ---- Événements ----
      input.addEventListener('keydown', (e) => {
        if (e.key === 'Enter') {
          const value = input.value;
          if (!value.trim()) return;
          history.unshift(value);
          histIndex = -1;
          input.value = '';
          run(value);
        } else if (e.key === 'ArrowUp') {
          e.preventDefault();
          histIndex = Math.min(histIndex + 1, history.length - 1);
          input.value = history[histIndex] || '';
          setTimeout(() => input.setSelectionRange(input.value.length, input.value.length), 0);
        } else if (e.key === 'ArrowDown') {
          e.preventDefault();
          histIndex = Math.max(histIndex - 1, -1);
          input.value = history[histIndex] || '';
        } else if (e.key === 'Tab') {
          e.preventDefault();
          const cur = input.value.trim();
          if (!cur) return;
          const completed = autocomplete(cur);
          input.value = completed + ' ';
        }
      });

      // Focus facile
      screen.addEventListener('click', () => input.focus());

      // Theme persistant
      try {
        const saved = localStorage.getItem(SAVE_THEME_KEY);
        if (saved) { body.className = saved; }
      } catch {}

      // Intro
      banner();
      about();
      printLine(' ');
      help();
      printLine(' ');
      listProjects();
    })();
  </script>
</body>
</html>
